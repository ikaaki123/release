
<div *ngIf="packageTable">
<div class="container">
    <div class="row">
      <div class="row">
        <div class="col-md-12 mt-2" >
          <button
            class="btn btn_add"
            mat-raised-button
            matTooltip="მონაცემების გადმოწერა"
            style="background-color:white"
            (click)="download()"
          >
            <mat-icon>cloud_download</mat-icon>
            მონაცემების გადმოწერა
          </button>
        </div>
      </div>
    <div class="row">
        <div class="col-md-12 my-1">
            <div class="mat-elevation-z8 packageTable" >
                <table mat-table [dataSource]="item.result">
                    <ng-container matColumnDef="boxNumber">
                        <th mat-header-cell *matHeaderCellDef>
                            <div>
                                <mat-form-field
                                  appearance="outline"
                                  matTooltip="ყუთის ნომერი"
                                  matTooltipPosition="after">
                                  <input
                                  matInput
                                  type="number"
                                  class="form-field"
                                  placeholder="ყუთის ნომერი"
                                  [(ngModel)]="filter.boxNumber"
                                  (keyup.enter)="onFilter(filter.boxNumber)"
                                  (keyup.backspace)="onFilter(filter.boxNumber)"
                                  >
                                </mat-form-field>
                              </div>
                        </th>
                        <td mat-cell *matCellDef="let item"> {{item.boxNumber}} </td>
                      </ng-container>

                   <ng-container matColumnDef="packageNumber">
                    <th mat-header-cell *matHeaderCellDef>
                      <div>
                        <mat-form-field
                          appearance="outline"
                          matTooltip="პაკეტის ნომერი"
                          matTooltipPosition="after">
                          <input
                          matInput
                          type="text"
                          class="form-field"
                          placeholder="პაკეტის ნომერი"
                          [(ngModel)]="filter.packageNumber"
                          (keyup.enter)="onFilter(filter.packageNumber)"
                          (keyup.backspace)="onFilter(filter.packageNumber)"
                          >
                        </mat-form-field>
                      </div>
                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.packageNumber}} </td>
                  </ng-container>

                  <ng-container matColumnDef="caseNumber">
                    <th mat-header-cell *matHeaderCellDef>
                      <div>
                        <mat-form-field
                          appearance="outline"
                          matTooltip="საქმის ნომერი"
                          matTooltipPosition="after">
                          <input
                          matInput
                          placeholder="საქმის ნომერი"
                          [(ngModel)]="filter.caseNumber"
                          (keyup.enter)="onFilter(filter.caseNumber)"
                          (keyup.backspace)="onFilter(filter.caseNumber)"
                          >
                        </mat-form-field>
                      </div>
                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.caseNumber}} </td>
                  </ng-container>

                  <!-- <ng-container matColumnDef="caseNumber">
                    <th mat-header-cell *matHeaderCellDef>
                      <div>
                        <mat-form-field
                          appearance="outline"
                          matTooltip="საქმის ნომერი"
                          matTooltipPosition="after">
                          <input
                          matInput
                          class="form-field"
                          placeholder="საქმის ნომერი"
                          [(ngModel)]="filter.caseNumber"
                          (keyup.enter)="onFilter(filter.caseNumber)"
                          (keyup.backspace)="onFilter(filter.caseNumber)"
                          >
                        </mat-form-field>
                      </div>
                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.caseNumber}} </td>
                  </ng-container> -->

                  <ng-container matColumnDef="clientName">
                    <th mat-header-cell *matHeaderCellDef>
                        <div>
                          <mat-form-field
                            appearance="outline"
                            matTooltip="კლიენტის სახელი"
                            matTooltipPosition="after">
                            <input
                            matInput
                            type="text"
                            class="form-field"
                            placeholder="კლიენტის დასახელება"
                            [(ngModel)]="filter.ClientName "
                            (keyup.enter)="onFilter(filter.ClientName )"
                            (keyup.backspace)="onFilter(filter.ClientName )"
                            >
                          </mat-form-field>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let package"> {{package.clientName}} </td>
                  </ng-container>

                  <ng-container matColumnDef="clientId">
                    <th mat-header-cell *matHeaderCellDef>
                        <div>
                          <mat-form-field
                            appearance="outline"
                            matTooltip="კლიენტის ID"
                            matTooltipPosition="after">
                            <input
                            matInput
                            type="number"
                            class="form-field"
                            placeholder="კლიენტის ID"
                            [(ngModel)]="filter.clientId"
                            (keyup.enter)="onFilter(filter.clientId)"
                            (keyup.backspace)="onFilter(filter.clientId)"
                            >
                          </mat-form-field>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let package"> {{package.clientId}} </td>
                  </ng-container>

                  <ng-container matColumnDef="checkerDate">
                    <th mat-header-cell *matHeaderCellDef>
                      <div class="bs_datepicker"
                         matTooltip="შექმნის თარიღი"
                          matTooltipPosition="after">
                        <input type="text"
                        [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
                              class="form-control"
                              #itemDate
                              placeholder="&#xf073; {{'შექმნის თარიღი' }}"
                              style="font-size: 10px; font-family: Arial, FontAwesome"
                              bsDatepicker
                               [(ngModel)]="filter.dateCreated"
                               (ngModelChange)="getDate(filter.dateCreated,'dateCreated')"
                               (keyup.backspace)="onFilter(filter.dateCreated)"
                               >
                      </div>
                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.dateCreated|date}} </td>
                  </ng-container>

                    <ng-container matColumnDef="dateOfInspection">
                    <th mat-header-cell *matHeaderCellDef>
                      <div class="bs_datepicker"
                         matTooltip="შემოწმების თარიღი"
                          matTooltipPosition="after">
                        <input type="text"
                              [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
                              class="form-control"
                              #itemDate
                              placeholder="&#xf073; {{'შემოწმების თარიღი' }}"
                              style="font-size: 10px; font-family: Arial, FontAwesome"
                              bsDatepicker
                              [(ngModel)]="filter.checkingDate"
                               (ngModelChange)="getDate(filter.checkingDate,'checkingDate')"
                               (keyup.backspace)="onFilter(filter.checkingDate)"
                               >
                      </div>

                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.checkingDate |date}} </td>
                  </ng-container>

                  <ng-container matColumnDef="creator">
                    <th mat-header-cell *matHeaderCellDef>
                      <div>
                        <mat-form-field
                          appearance="outline"
                          matTooltip="შემქმნელი"
                          matTooltipPosition="after">
                          <input
                            matInput
                            type="text"
                            class="form-field"
                            placeholder="შემქმნელი"
                            [(ngModel)]="filter.userName"
                            (keyup.enter)="onFilter(filter.userName)"
                            (keyup.backspace)="onFilter(filter.userName)"
                          >
                        </mat-form-field>
                      </div>
                    </th>
                    <td mat-cell *matCellDef="let package"> {{package.userName}} </td>
                  </ng-container>

<!--                  <ng-container matColumnDef="creator">-->
<!--                    <th mat-header-cell *matHeaderCellDef>შემქმნელი</th>-->
<!--                    <td mat-cell *matCellDef="let package"> {{package.userName}} </td>-->
<!--                  </ng-containeyr>-->

                  <ng-container matColumnDef="fileStatusId">
                    <th mat-header-cell *matHeaderCellDef>
                        <div>
                          <mat-form-field
                            appearance="outline"
                            matTooltip="კლიენტის ID"
                            matTooltipPosition="after">
                            <input
                            matInput
                            type="number"
                            class="form-field"
                            placeholder="საქმის სტატუსი ID"
                            >
                          </mat-form-field>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let package"> {{package.fileStatusId}} </td>
                  </ng-container>
                  <ng-container matColumnDef="caseStatur">
                    <th mat-header-cell *matHeaderCellDef>
                        <select class="form-select" aria-label="Default select example" (change)="onFilter(filter.FileStatusId)" [(ngModel)]="filter.FileStatusId">
                            <option *ngFor="let fileStatus of fileStatus" [value]="fileStatus.id"
                                    >{{fileStatus.name}}</option>
                          </select>
                      </th>
                      <td mat-cell *matCellDef="let package"> {{package.fileStatusName}} </td>
                  </ng-container>

                  <ng-container matColumnDef="checkingUser">
                    <th mat-header-cell *matHeaderCellDef>
                        <div>
                          <mat-form-field
                            appearance="outline"
                            matTooltip="შემმოწმებელი"
                            matTooltipPosition="after">
                            <input
                            matInput
                            type="text"
                            class="form-field"
                            placeholder="შემმოწმებელი"
                            [(ngModel)]="filter.checkingUser"
                            (keyup.enter)="onFilter(filter.checkingUser)"
                            (keyup.backspace)="onFilter(filter.checkingUser)"
                            >
                          </mat-form-field>
                        </div>
                      </th>
                      <td mat-cell *matCellDef="let package"> {{package.checkingUser}} </td>
                  </ng-container>

                  <ng-container matColumnDef="actionIcons" >
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let item">
                      <i class="fa fa-edit"  matTooltip="პაკეტის რედაქტირება"></i>
                      <i class="fa fa-plus"  matTooltip="პაკეტის დამატება" (click)="addClient(item.packageId,item.packageNumber, true)"> </i>
                      <i *ngIf="(decodedToken.unique_name == 'nino.patashuri@drm.ge' || 
                                decodedToken.unique_name == 'natia.khvichia' || 
                                decodedToken.unique_name == 'release@gmail.com') && item.fileStatusId == 8" 
                                class="fa fa-trash"  matTooltip="პაკეტის წაშლა" (click)="deletePackage(item.fileId, true)"> </i>
                    </td>
                  </ng-container>

                  <!-- <ng-container matColumnDef="deleteRow" >
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let item">
                      <i class="fa fa-edit"  matTooltip="პაკეტის რედაქტირება"></i>
                      <i class="fa fa-plus"  matTooltip="პაკეტის რედაქტირება" (click)="addClient(item.packageId, true)"> </i>
                    </td>
                  </ng-container> -->
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <!-- <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr> -->
                  <tr mat-row *matRowDef="let row; columns: displayedColumns" (click)="packageinfo(row.fileId)"></tr> 
                </table>
             </div>
             <mat-paginator
             [length]=totalRecords
             [pageSize]= pagenations.pageSize
             [pageSizeOptions]=pageSizeOptions

      showFirstLastButtons (page)="pagenation($event)" >
    </mat-paginator>
    </div>
</div>

</div></div></div>
<simple-notifications></simple-notifications>




















